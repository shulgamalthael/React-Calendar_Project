(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a(31)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),i=(a(19),a(2)),l=a(1),s=a.n(l),u=a(3),m=function(e){return s()().day(7*e+1)},d=function(e){return Object(u.a)(Array(7).keys()).map((function(t){return m(e).day(t+1).format("YYYY-MM-DD")}))},f=(a(21),function(e){var t=e.setCurrentWeek,a=e.currentWeek,n=m(a),c=s()(n).day(7),o=function(e){return n.format(e)!==c.format(e)?"".concat(n.format(e)," - ").concat(c.format(e)):"".concat(n.format(e))},i=o("MMMM"),l=o("YYYY");return r.a.createElement("div",{className:"navigation"},r.a.createElement("button",{className:"navigation__today-btn",onClick:function(){return t(0)}},"Today"),r.a.createElement("button",{className:"navigation__icon-btn",onClick:function(){return t(a-1)}},r.a.createElement("i",{className:"fas fa-chevron-left"})),r.a.createElement("button",{className:"navigation__icon-btn",onClick:function(){return t(a+1)}},r.a.createElement("i",{className:"fas fa-chevron-right"})),r.a.createElement("span",{className:"navigation__displayed-month"},"".concat(i," ").concat(l)))}),v=(a(22),function(e){var t=e.setCurrentWeek,a=e.currentWeek,n=e.toggleVisibleModal;return r.a.createElement("header",{className:"header"},r.a.createElement("button",{className:"create-event-button",onClick:function(){return n(!0)}},r.a.createElement("i",{className:"fas fa-plus create-event-btn__icon"}),"Create"),r.a.createElement(f,{setCurrentWeek:t,currentWeek:a}))}),E="https://5f902cade0559c0016ad6316.mockapi.io/Project-Server",h=function(e){return fetch(E,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("Internal Server Error. Failed to create events")}))},p={title:"",date:s()().format("YYYY-MM-DD"),timeStart:s()().format("HH:mm"),timeEnd:s()().format("HH:mm"),description:""},_=(a(23),function(){return r.a.createElement("div",{className:"calendar__sidebar sidebar"},Object(u.a)(Array(24).keys()).map((function(e){return r.a.createElement("div",{className:"sidebar__time-slot",key:e},r.a.createElement("span",{className:"sidebar__time"},"".concat(e,":00")))})))}),b=function(e){var t=e.id,a=e.fetchEvents,c=e.toggleVisibleTooltip;return Object(n.useEffect)((function(){var e=function(){var e;(e=t,fetch("".concat(E,"/").concat(e),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Internal Server Error. Failed to delete events")}))).then((function(){return a()})).catch((function(e){return alert(e)}))},n=document.querySelector(".event__delete-tooltip");return n.addEventListener("click",e),function(){return n.removeEventListener("click",e)}})),r.a.createElement("div",{className:"event__delete-tooltip",onMouseOut:function(){return c(!1)}},"Delete")};b.defaultProps={id:Math.random()+""};var y=b,N=(a(24),function(e){var t=e.fetchEvents,a=e.eventData,c=Object(n.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],u=a.id,m=a.title,d=a.description,f=a.timeStart,v=a.timeEnd;return r.a.createElement("div",{className:"event"},r.a.createElement("button",{className:"event__close-btn close-btn",onClick:function(){return s(!l)}},"+"),r.a.createElement("div",{className:"event__title"},m),r.a.createElement("div",{className:"event__time"},"".concat(f," - ").concat(v)),r.a.createElement("div",{className:"event__description"},d),l&&r.a.createElement(y,{id:u,fetchEvents:t,toggleVisibleTooltip:s}))}),D=(a(25),function(e){var t=e.hour,a=e.currentDay,c=e.eventData,o=e.fetchEvents,l=Object(n.useState)(s()().format("mm")),u=Object(i.a)(l,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){var e=setInterval((function(){return d(s()().format("mm"))}),6e4);return function(){return clearInterval(e)}})),r.a.createElement("div",{className:"calendar__hour","data-date":a,"data-timestart":t},c?r.a.createElement(N,{eventData:c,fetchEvents:o}):null,"".concat(a," ").concat(t)===s()().format("YYYY-MM-DD HH")&&r.a.createElement("div",{className:"calendar__hour__red-line",style:{top:"".concat(m,"px")}}))}),g=(a(26),function(e){var t=e.currentDay,a=e.eventsInCurrentDay,n=e.fetchEvents,c=e.setNewEventData,o=e.toggleVisibleModal,i=function(e){return a.find((function(t){return t.timeStart.split(":")[0]==e}))};return r.a.createElement("div",{className:"calendar__day",onClick:function(e){if(e.target.classList.contains("calendar__hour")){var t=e.target.dataset,a=t.date,n=t.timestart,r={title:"",description:"",date:a,timeStart:"".concat(n,":00"),timeEnd:"".concat(n,":00")};c(r),o(!0)}}},Object(u.a)(Array(24).keys()).map((function(e){return r.a.createElement(D,{key:e.toString().padStart(2,"0"),hour:e.toString().padStart(2,"0"),currentDay:t,eventData:i(e.toString().padStart(2,"0")),fetchEvents:n})})))}),k=(a(27),function(e){var t=e.events,a=e.currentWeek,n=e.fetchEvents,c=e.setNewEventData,o=e.toggleVisibleModal,i=d(a),l=function(e){return t.filter((function(t){return t.date===e}))};return r.a.createElement("div",{className:"calendar__body"},r.a.createElement(_,null),r.a.createElement("div",{className:"calendar__week"},i.map((function(e,t){return r.a.createElement(g,{key:t,eventsInCurrentDay:l(e),currentDay:e,fetchEvents:n,setNewEventData:c,toggleVisibleModal:o})}))))}),C=(a(28),function(e){var t=e.currentWeek,a=d(t);return r.a.createElement("header",{className:"calendar__header "},a.map((function(e,t){var a=e===s()().format("YYYY-MM-DD")?"calendar__day-label today":"calendar__day-label";return r.a.createElement("div",{key:t,className:a},r.a.createElement("span",{className:"calendar__day-name"},s()(e,"YYYY MM DD").format("dddd")),r.a.createElement("span",{className:"calendar__day-number"},s()(e,"YYYY MM DD").format("DD")))})))}),S=(a(29),function(e){var t=e.children,a=e.reset,n=e.isVisibleModal?"modal overlay":"modal overlay hidden";return r.a.createElement("div",{className:n},r.a.createElement("div",{className:"modal__content"},r.a.createElement("div",{className:"create-event"},r.a.createElement("button",{className:"close-btn",onClick:function(){return a()}},"+"),t)))});S.defaultProps={children:null};var j=S,O=a(6),Y=a(7),M=a(10),w=a(11),I=a(13),W=a(12),V=(a(30),function(e){Object(I.a)(a,e);var t=Object(W.a)(a);function a(){var e;Object(M.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={formData:p},e.handleChangeFormInput=function(t){var a=t.target,n=a.name,r=a.value;e.setState({formData:Object(Y.a)(Object(Y.a)({},e.state.formData),{},Object(O.a)({},n,r))})},e.handleCreateEvent=function(t){t.preventDefault();var a=e.props,n=a.fetchEvents,r=a.reset;h(e.state.formData).then((function(){n(),r(),e.setState({formData:p})})).catch((function(e){return alert(e)}))},e}return Object(w.a)(a,[{key:"componentDidMount",value:function(){document.querySelector(".create-event__form").addEventListener("submit",this.handleCreateEvent)}},{key:"componentDidUpdate",value:function(e){this.props.newEventData!==e.newEventData&&this.setState({formData:this.props.newEventData})}},{key:"componentWillUnmount",value:function(){document.querySelector(".create-event__form").removeEventListener("submit",this.handleCreateEvent)}},{key:"render",value:function(){var e=this.state.formData,t=e.title,a=e.date,n=e.timeStart,c=e.timeEnd,o=e.description;return r.a.createElement("form",{className:"create-event__form"},r.a.createElement("input",{type:"text",name:"title",className:"create-event__field",placeholder:"Title",value:t,onChange:this.handleChangeFormInput}),r.a.createElement("div",{className:"create-event__time-block"},r.a.createElement("input",{type:"date",name:"date",className:"create-event__date-field",value:a,onChange:this.handleChangeFormInput}),r.a.createElement("input",{type:"time",name:"timeStart",className:"create-event__date-field",step:"900",value:n,onChange:this.handleChangeFormInput}),r.a.createElement("span",null),r.a.createElement("input",{type:"time",name:"timeEnd",className:"create-event__date-field",step:"900",value:c,onChange:this.handleChangeFormInput})),r.a.createElement("textarea",{name:"description",id:"",placeholder:"Description",className:"create-event-form__field",value:o,onChange:this.handleChangeFormInput}),r.a.createElement("button",{className:"create-event__submit-btn",type:"submit"},"Save"))}}]),a}(r.a.Component)),F=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(i.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),f=d[0],h=d[1],_=Object(n.useState)(p),b=Object(i.a)(_,2),y=b[0],N=b[1],D=function(){return fetch(E).then((function(e){if(e.ok)return e.json();throw new Error("Internal Server Error. Can't display events")})).then((function(e){return u(e)})).catch((function(e){return alert(e)}))};Object(n.useEffect)((function(){D()}),[]);var g=function(){h(!1),N(p)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{setCurrentWeek:c,currentWeek:a,toggleVisibleModal:h}),r.a.createElement("main",{className:"calendar"},r.a.createElement(C,{currentWeek:a}),r.a.createElement(k,{events:s,currentWeek:a,fetchEvents:D,setNewEventData:N,toggleVisibleModal:h})),r.a.createElement(j,{isVisibleModal:f,reset:g},r.a.createElement(V,{newEventData:y,fetchEvents:D,reset:g})))};o.a.render(r.a.createElement(F,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.0d590b3f.chunk.js.map